<div class="title-group">
  <h1><%= @jem.name.capitalize %>
   <small><%= @jem.description %></small> 
  </h1>
</div>
<!-- <h5> Drag and drop your files anywhere in the browser to upload </h5> -->

<div class="row">
  <div class="col-md-3 info-pane">
    <dl>
        <dt>Author:</dt>
        <dd><%= @jem.author %></dd>

        <dt>Email:</dt>
        <dd><%= @jem.email %></dd>

        <dt>Homepage:</dt>
        <dd><%= @jem.homepage %></dd>

        <dt>Name:</dt>
        <dd><%= @jem.name %></dd>

        <dt>Github:</dt>
        <% if URI.parse(@jem.github).scheme == nil %>
          <dd><%= link_to "github/" + @jem.name, "http://" + @jem.github.to_s %></dd>
        <% else %>
          <dd><%= link_to "github/" + @jem.name, @jem.github.to_s %></dd>
        <% end %>

        <dt>Version:</dt>
        <dd><%= @jem.version_number %></dd>

        <dt>Description:</dt>
        <dd><%= @jem.description %></dd>

        <dt>Created:</dt>
        <dd><%= @jem.created_at %></dd>

        <dt>Update:</dt>
        <dd><%= @jem.updated_at %></dd>

    </dl>
  </div>

  <div class="col-md-7 col-md-offset-1">
    <h3>Gem files</h3>
    <table class="table table-hover" id="file-list">
      <thead>
        <tr>
          <th>FILE NAME</td>
          <th class="text-center">FILE TYPE</td> 
          <th class="text-center" width="80">DELETE</th>
        </tr>
      </thead>
      <tbody>
        <% @jem.scripts.each do |script| %>
          <tr data-id="<%= script.id %>">
            <td><%= File.basename(script.file.url) %></td>
            <td class="text-center"><%= script.file.file.extension.upcase %></td>
            <td>
              <%=
                link_to 'Remove',
                delete_script_path(script),
                remote: :true,
                method: :delete,
                :data => { confirm: "Are you sure? "},
                :class => "btn btn-danger btn-xs center-block"
               %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= form_tag '/create_gem', :method => :post, :remote => :true do %>
    <input type="hidden" name="id" value="<%= @jem.id %>"/>
    <%= submit_tag 'Create Gem', class: "btn btn-primary btn-sm pull-right" %>
    <% end %>
  </div>
</div>

<form action="/jems/<%= @jem.id %>/scripts" id="new-script" class="" enctype="multipart/form-data" method="post" style="display:none;">
  <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
  <input name="_method" type="hidden" value="POST" />

  <input name="script[file]" type="file" multiple style="display:none;" />
</form>



<script id="template-upload" type="text/x-tmpl">
  <div class="upload">
    {%=o.name%}
    <div class="progress"><div class="bar" style="width: 0%;"></div></div>
  </div>
</script>